<html>
	<head>
	<script type="text/javascript" src="../js/utils.js"></script>
	<script type="text/javascript" src="../js/commons.js"></script>
	</head>
	<body>
		<script type="text/javascript">
		var url = "http://www.baidu.com";
		/*
		* create XMLHttpRequest object
		*/
		var request = new XMLHttpRequest();
		//for ie5 ie6
		//var request = new ActiveXObject("Msxml2.XMLHTTP");
		//var request = new ActiveXObject("Microsoft.XMLHTTP");

		/*
		  registe request onreadystatechange

		  request.readystate:
		  0: open() not call
		  1: open is called but send not call
		  2: send() is called but not receive response 
		  3: receiving reponse but not finished
		  4: receive response to finish
		*/
		request.onreadystatechange=function(){
			
			if(request.readystate == 4){
				if(request.status == 200){
					alert(request.responseText);
				}
			}	
		}
                
		/*
		* open url
		  paramater[1]: HTTP Method:GET POST HEAD
		  paramater[2]: HTTP URL
		  paramater[3]:sync:false/async:true(default)
		  paramater[4]: username
		  paramater[5]: password
		*/
		request.open("GET",url,true);

		/*
		   set HTTP request Header
		   key:value

		   web brower auto set Cookie
		*/
		request.setRequestHeader("User-Agent","XMLHttpRequest");
		request.setRequestHeader("Accept-Language","en");
		request.setRequestHeader("If-Modifies-Since",lastRequestTime.toString());
                
		/*
		   send request
		   paramater[1]:http request body
		*/
		request.send(null);
                if(request.status == 200){
			alert(request.responseText);

			if(request.getResponseHeader("Content-Type") == "text/xml"){
				var doc = request.responseXML;
			}
		}else{
			alert("Error :"+request.status+" "+request.statusText);
		}

		</script>
	</body>
</html>
